-- import: fastn/processors as pr
-- import: email-subscription-box/assets

-- record r-data:
string name:
string email:

-- r-data data:
$processor$: pr.request-data

-- integer status:
$processor$: pr.pg
name: $data.name
email: $data.email

INSERT INTO subscriptions (name, email) VALUES ($name::VARCHAR, $email::VARCHAR);

-- ftd.text: Successfully subscribed
text if { status == 1 }: Something went wrong.
